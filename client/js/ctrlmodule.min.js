angular.module("Ctrlmodule",[]).factory("Ctrlmodule",function(){return{init:function(a,d,f,e,g){a.progressbar=g.createInstance();a.progressbar.setHeight("4");a.progressbar.setColor("red");a.progressbar.start();a.records=[];a.initial=[];a.itemmodel=e.copy(a.defaultmodel);a.Model=d(a.api_attribute);a.Model.query(function(b){a.records=b;a.progressbar.complete()});a.save=function(b){a.progressbar.start();b.isedit=!1;var c=new a.Model;c.name=b.name;"Unit Price"===a.name_attribute&&(c.unit_price=b.unit_price);
c[a.id_attribute]=b[a.id_attribute];c.$save(function(b){a.progressbar.complete()})};a.createnew=function(){a.progressbar.start();var b=new a.Model,c;for(c in a.itemmodel)a.itemmodel.hasOwnProperty(c)&&(b[c]=a.itemmodel[c]);b.name=a.itemmodel.value;"Unit Price"===a.name_attribute&&(b.unit_price=a.itemmodel.value);b[a.id_attribute]="";b.$save(function(b){b.success&&a.records.push(b.record);a.itemmodel=e.copy(a.defaultmodel);a.catgory.model={};a.product.model={};a.size.model={};a.hotcold.model={};a.progressbar.complete()})};
a.setInit=function(a){a.isedit=!1;a.initial={};a.initial=e.copy(a)};a.edit=function(a){a.isedit=!0};a.cancel=function(b){var c=b[a.id_attribute],d=e.copy(b.initial.name);e.forEach(a.records,function(b,e){b[a.id_attribute]===c&&(b.name=d,b.isedit=!1)},[])};a.catgory={};a.catgory.model={};a.catgory.availableOptions=[];"Product Name"===a.name_attribute&&(a.changeCatgory=function(){a.itemmodel.cat_id=a.catgory.model.cat_id;a.itemmodel.cat_name=a.catgory.model.name},f=d("/category/api"),a.progressbar.start(),
f.query(function(b){a.catgory.availableOptions=b;a.progressbar.complete()}));a.size={};a.size.model={};a.size.availableOptions=[];"Unit Price"===a.name_attribute&&(a.changeSize=function(){a.itemmodel.size_id=a.size.model.size_id;a.itemmodel.size_name=a.size.model.name},f=d("/size/api"),a.progressbar.start(),f.query(function(b){a.size.availableOptions=b;a.progressbar.complete()}));a.product={};a.product.model={};a.product.availableOptions=[];"Unit Price"===a.name_attribute&&(a.changeProduct=function(){a.itemmodel.item_id=
a.product.model.item_id;a.itemmodel.item_name=a.product.model.name;a.itemmodel.cat_id=a.product.model.cat_id;a.itemmodel.cat_name=a.product.model.cat_name},d=d("/product/api"),a.progressbar.start(),d.query(function(b){a.product.availableOptions=b;a.progressbar.complete()}));a.hotcold={};a.hotcold.model={};a.hotcold.availableOptions=[{name:"Hot"},{name:"Cold"}];"Unit Price"===a.name_attribute&&(a.changeHotCold=function(){a.itemmodel.hot_cold=a.hotcold.model.name})}}});
